<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Domain Monitoring</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/theme.css">
</head>
<body>
  <!-- KPI -->
  <section class="kpis">
    <div class="card kpi" style="border-left-color:#e5e7eb">
      <div class="label">총 도메인</div><div class="value" id="kpi-total">0</div><div class="label" id="kpi-total-sub">-</div>
    </div>
    <div class="card kpi green">
      <div class="label">정상</div><div class="value" id="kpi-normal">0</div><div class="label" id="kpi-normal-sub">-</div>
    </div>
    <div class="card kpi amber">
      <div class="label">주의</div><div class="value" id="kpi-warning">0</div><div class="label" id="kpi-warning-sub">-</div>
    </div>
    <div class="card kpi red">
      <div class="label">긴급</div><div class="value" id="kpi-critical">0</div><div class="label" id="kpi-critical-sub">-</div>
    </div>
    <div class="card kpi purple">
      <div class="label">인증서 만료</div><div class="value" id="kpi-ssl-expired">0</div><div class="label" id="kpi-ssl-expired-sub">-</div>
    </div>
    <div class="card kpi blue">
      <div class="label">인증서 재발급</div><div class="value" id="kpi-ssl-cn">0</div><div class="label" id="kpi-ssl-cn-sub">-</div>
    </div>
    <div class="card kpi blue">
      <div class="label">불일치</div><div class="value" id="kpi-mismatch">0</div><div class="label" id="kpi-mismatch-sub">-</div>
    </div>
  </section>

  <!-- Chrome-like Tabs -->
  <div class="tabsbar">
    <button class="tab-btn active" data-tab="tab-domains">도메인</button>
    <button class="tab-btn" data-tab="tab-shots">스크린샷 뷰어</button>
  </div>

  <!-- Dataset + Search -->
  <div class="dataset">
    <label for="runSelect" class="sr-only">모니터링 날짜</label>
    <select id="runSelect" class="sel" aria-label="모니터링 날짜"></select>

    <label for="dsSelect" class="sr-only">도메인</label>
    <select id="dsSelect" class="sel" aria-label="도메인"></select>

    <span class="spacer"></span>
    <div class="search">
      <input id="search" type="search" placeholder="도메인/응답/권고/Status/원본 검색…" aria-label="검색" />
    </div>
  </div>

  <!-- Domain tab -->
  <div id="tab-domains" class="tab-panel active">
    <div class="filters">
      <button class="btn active" data-filter="all">전체</button>
      <button class="btn" data-filter="normal">정상</button>
      <button class="btn" data-filter="abnormal">비정상</button>
      <button class="btn" data-filter="warning">주의</button>
      <button class="btn" data-filter="critical">긴급</button>
      <button class="btn" data-filter="ssl-expired">인증서 만료</button>
      <button class="btn" data-filter="ssl-cn">인증서 재발급</button>
      <button class="btn" data-filter="mismatch">불일치</button>
      <button class="btn" data-filter="manual-invalid">Manual</button>
      <button class="btn" data-filter="has-screenshot" title="스크린샷이 있는 도메인만 보기">스크린샷</button>
    </div>

    <div class="table-wrap" id="tableWrap">
      <table id="table">
        <thead>
          <tr>
            <th>도메인</th>
            <th>위험도</th>
            <th>응답/오류 (단순화)</th>
            <th>AI 판정</th>
            <th>수동 판정</th>
            <th>불일치</th>
            <th>권고</th>
            <th>원본</th>
            <th>이미지</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Screenshots tab -->
  <div id="tab-shots" class="tab-panel">
    <div id="shotsStream" class="shots-stream"></div>
  </div>

  <!-- Floating Home -->
  <button id="btnHome" class="btn-home" title="맨 위로">
    <svg viewBox="0 0 24 24" width="16" height="16" fill="none" aria-hidden="true">
      <path d="M12 5l-7 7h4v7h6v-7h4l-7-7z" fill="currentColor"/>
    </svg>
    Home
  </button>

  <script type="module" src="js/app.js"></script>

  <!-- Raw Modal -->
<div id="rawModal" class="dm-modal" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="dm-backdrop"></div>
  <div class="dm-dialog" role="document">
    <div class="dm-header">
      <div class="dm-title">
        <a id="modalLink" href="#" target="_blank" rel="noopener">domain</a>
      </div>
      <div class="dm-actions">
        <button class="btn" id="modalPrev" title="이전(←)">←</button>
        <button class="btn" id="modalNext" title="다음(→)">→</button>
        <button class="btn" id="modalClose" title="닫기(ESC)">닫기</button>
      </div>
    </div>

    <div class="dm-tabs" role="tablist" aria-label="원본 보기 탭">
      <button class="tab active" data-pane="overview" role="tab" aria-selected="true">개요</button>
      <button class="tab" data-pane="json" role="tab" aria-selected="false">JSON</button>
      <button class="tab" data-pane="screenshot" role="tab" aria-selected="false">스크린샷</button>
    </div>

    <div class="dm-content">
      <section data-pane="overview" class="pane active" role="tabpanel">
        <div id="modalKV" class="kv"></div>
      </section>
      <section data-pane="json" class="pane" role="tabpanel">
        <pre id="modalJSON" class="json" style="font-family:ui-monospace"></pre>
      </section>
      <section data-pane="screenshot" class="pane" role="tabpanel">
        <div id="modalShotWrap"></div>
      </section>
    </div>
  </div>
</div>

</body>
</html>
