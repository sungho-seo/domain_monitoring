/* Base layout */
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:#f3f4f6;color:#111827;margin:0;padding:20px}
.card{background:#fff;border-radius:8px;padding:16px;margin-bottom:20px;box-shadow:0 1px 3px rgba(0,0,0,.1)}

/* KPI */
.kpis{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:20px}
.kpi{position:relative;flex:1 1 140px;text-align:center;border-left:6px solid #e5e7eb}
.kpi .label{font-size:14px;color:#555}
.kpi .value{font-size:22px;font-weight:700;margin:4px 0}
.kpi.green{border-left-color:#16a34a}
.kpi.amber{border-left-color:#f59e0b}
.kpi.red{border-left-color:#dc2626}
.kpi.purple{border-left-color:#7c3aed}
.kpi.blue{border-left-color:#2563eb}

/* Tabs (Chrome-like) */
.tabsbar{position:relative; display:flex; align-items:flex-end; gap:6px; margin:8px 0 12px}
.tabsbar::after{content:""; position:absolute; left:0; right:0; bottom:0; height:1px; background:#e5e7eb;}
.tab-btn{
  position:relative; background:transparent; color:#6b7280;
  border:1px solid transparent; border-bottom:none;
  padding:8px 14px; border-top-left-radius:10px; border-top-right-radius:10px;
  cursor:pointer; transition:all .15s ease; isolation:isolate;
}
.tab-btn:hover{ color:#111827; background:#f3f4f6 }
.tab-btn.active{ background:#fff; color:#111827; border-color:#d1d5db; box-shadow:0 -1px 0 #fff inset; }

/* Buttons (LG Red scheme) */
.btn{
  background:var(--lg-red-100);
  color:var(--lg-red);
  border:1px solid var(--lg-red-200);
  padding:6px 12px;border-radius:6px;cursor:pointer;
  transition:background .15s ease, color .15s ease, border-color .15s ease;
}
.btn:hover{ background:var(--lg-red-200); }
.btn.active{
  background:var(--lg-red); color:#fff; border-color:var(--lg-red-dark);
}
.btn[disabled], .btn.disabled{ opacity:.4; cursor:not-allowed; }

/* Dataset + search */
.dataset{display:flex;gap:6px;margin-bottom:10px;align-items:center;flex-wrap:wrap}
.spacer{flex:1}
.search input{padding:6px 10px;border:1px solid #d1d5db;border-radius:6px;min-width:240px;max-width:100%}

/* Filters line */
.filters{display:flex;gap:6px;flex-wrap:wrap;align-items:center;margin-bottom:12px}

/* Icon buttons */
.icon-btn{
  background:var(--lg-red-100);
  color:var(--lg-red);
  border:1px solid var(--lg-red-200);
  border-radius:6px;padding:6px;cursor:pointer;display:inline-flex;align-items:center;justify-content:center
}
.icon-btn:hover{background:var(--lg-red-200)}
.icon-btn svg{width:16px;height:16px;display:block}
.icon-btn.disabled{opacity:.4;cursor:not-allowed}

/* Table */
.table-wrap{overflow:auto;border:1px solid #e5e7eb;border-radius:8px}
table{width:100%;border-collapse:collapse;font-size:14px}
thead th{position:sticky;top:0;background:#f9fafb;z-index:1}
th,td{padding:10px;border-bottom:1px solid #e5e7eb;text-align:center}

/* Row tints */
tr.row-normal   td{background:#ecfdf5}
tr.row-warning  td{background:#fff7ed}
tr.row-critical td{background:#fef2f2}
tr.row-expired  td{background:#f5f3ff}
tr.row-cn       td{background:#eff6ff}
tr.row-selected td{background:#e5e7eb !important}

/* Pills & badges */
.pill{display:inline-flex;align-items:center;padding:4px 10px;border-radius:9999px;font-weight:500;font-size:12px;line-height:1}
.pill.ok{background:#edf7f1;color:#166534}
.pill.warn{background:#fff6e0;color:#92400e}
.pill.crit{background:#ffecec;color:#991b1b}
.pill.good{background:#edf7f1;color:#166534}
.pill.bad{background:#ffecec;color:#991b1b}
.pill.neut{background:#eef1f4;color:#374151}
.badge{display:inline-block;padding:4px 8px;border-radius:9999px;background:#f4f5f7;color:#4b5563;border:1px solid #e5e7eb;font-size:12px;font-weight:500}

/* Raw viewer */
.raw-viewer{display:none;margin-top:12px}
.raw-viewer[data-open="1"]{display:block}
.raw-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.kv{width:100%;border-collapse:collapse;font-size:13px}
.kv th,.kv td{border:1px solid #e5e7eb;padding:6px 8px;text-align:left;vertical-align:top}
.kv th{background:#f9fafb;width:220px;white-space:nowrap}
pre.json{margin:0;padding:8px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;overflow:auto;font-size:12px}

/* Panels */
.tab-panel{display:none}
.tab-panel.active{display:block}

/* Screenshots stream */
.shots-stream{display:block}
.shot-card{
  background:#fff;border:1px solid #e5e7eb;border-radius:10px;overflow:hidden;
  margin:0 auto 14px auto; max-width:1100px;
}
.shot-meta{
  background:#2f3437; color:#f3f4f6;
  font-size:12px; padding:10px 12px; border-bottom:1px solid #222;
}
.shot-card a{display:block; background:#000}
.shot-card img{ width:70vw; max-width:100%; height:auto; display:block; margin:0 auto; }
.shot-filename{ font-size:12px;color:#374151;padding:10px 12px;border-top:1px solid #e5e7eb;word-break:break-all;background:#fff }

/* Floating Home */
.btn-home{
  position:fixed; right:16px; bottom:24px; z-index:25;
  background:var(--lg-red); color:#fff; border:none; border-radius:9999px; padding:12px 14px; cursor:pointer;
  box-shadow:0 8px 18px rgba(165,0,52,.35); display:none;
}
.btn-home.active{display:inline-flex; align-items:center; gap:6px}

/* === Override: (도메인 테이블) 원본/이미지 아이콘 버튼 → 회색계열 === */
.table-wrap .icon-btn{
  background:#f3f4f6;           /* 밝은 회색 */
  color:#6b7280;                /* 아이콘/선 색 */
  border:1px solid #e5e7eb;     /* 테두리 */
}
.table-wrap .icon-btn:hover{
  background:#e5e7eb;           /* hover시 약간 진하게 */
}
.table-wrap .icon-btn.disabled,
.table-wrap .icon-btn[disabled]{
  background:#f9fafb;           /* 비활성 배경 */
  color:#9ca3af;                /* 비활성 텍스트/아이콘 */
  border-color:#e5e7eb;
  cursor:not-allowed;
  opacity:1;                    /* 연하지만 흐릿해지지 않도록 */
}

/* === Override: (도메인 탭) 필터 버튼 → 회색계열 === */
.filters .btn{
  background:#f3f4f6;
  color:#374151;
  border:1px solid #e5e7eb;
}
.filters .btn:hover{
  background:#e5e7eb;
}
.filters .btn.active{
  background:#4b5563;           /* 선택됨: 진회색 */
  border-color:#4b5563;
  color:#fff;
}
.filters .btn[disabled],
.filters .btn.disabled{
  background:#f9fafb;
  color:#9ca3af;
  border-color:#e5e7eb;
  opacity:1;
  cursor:not-allowed;
}

/* 접근성용 숨김 라벨 */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* 셀렉트 공통 스타일 (데이터셋/날짜) */
.sel{
  appearance:none;
  background:#fff url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path d="M1 1l5 5 5-5" stroke="%236b7280" stroke-width="2" fill="none" stroke-linecap="round"/></svg>') no-repeat right 10px center/12px 8px;
  color:#374151; border:1px solid #d1d5db; border-radius:6px;
  padding:6px 28px 6px 10px; cursor:pointer;
}
.sel:focus{ outline:2px solid #e5e7eb; outline-offset:2px; }

.ds-buttons{display:flex; gap:6px; align-items:center}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* 탭이 다른 요소에 가려지지 않도록 */
.tabsbar{ position:relative; z-index:5; }
.tab-btn{ position:relative; z-index:6; }

/* 접근성용 숨김 라벨 (이미 있다면 중복 추가 불필요) */
.sr-only{
  position:absolute;width:1px;height:1px;padding:0;margin:-1px;
  overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
}

/* ===== Toast (우상단) ===== */
.toast-wrap{
  position:fixed; right:16px; top:16px; z-index:1000;
  display:flex; flex-direction:column; gap:8px;
}
.toast{
  min-width:240px; max-width:480px;
  padding:10px 12px; border-radius:8px; color:#111827; background:#f3f4f6;
  border:1px solid #e5e7eb; box-shadow:0 4px 14px rgba(0,0,0,.12);
  font-size:13px; line-height:1.35;
}
.toast.info{ background:#eff6ff; border-color:#bfdbfe; color:#1e3a8a; }
.toast.warn{ background:#fff7ed; border-color:#fed7aa; color:#92400e; }
.toast.error{ background:#fef2f2; border-color:#fecaca; color:#991b1b; }

/* ===== Spinner Overlay ===== */
.dm-spinner{
  position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
  background:rgba(255,255,255,.7); z-index:20; pointer-events:none; opacity:0; transition:opacity .15s ease;
}
.dm-spinner.active{ opacity:1; pointer-events:auto; }
.dm-spinner .dot{
  width:10px; height:10px; border-radius:50%; background:#9ca3af; margin:0 4px; animation:dm-bounce 1s infinite ease-in-out;
}
.dm-spinner .dot:nth-child(2){ animation-delay:.15s } .dm-spinner .dot:nth-child(3){ animation-delay:.3s }
@keyframes dm-bounce {
  0%, 80%, 100% { transform:scale(0.8); opacity:.6 }
  40% { transform:scale(1); opacity:1 }
}

/* ===== 표 머리글 정렬 표시 ===== */
th.sortable{ cursor:pointer; user-select:none; position:relative; }
th.sortable::after{
  content:''; position:absolute; right:8px; top:50%; transform:translateY(-50%);
  border:4px solid transparent; border-top-color:#9ca3af; opacity:.6;
}
th.sortable.sort-asc::after{ border-top-color:#111827; transform:translateY(-2px) rotate(180deg); }
th.sortable.sort-desc::after{ border-top-color:#111827; transform:translateY(-2px); }

/* ===== 스크린샷 퀵 필터 ===== */
.shots-filters{
  position:sticky; top:0; z-index:5; background:#fff; border-bottom:1px solid #e5e7eb;
  display:flex; gap:6px; padding:10px 8px; margin-bottom:10px;
}
.shots-filters .btn{ background:#f3f4f6; color:#374151; border:1px solid #e5e7eb; }
.shots-filters .btn:hover{ background:#e5e7eb; }
.shots-filters .btn.active{ background:#4b5563; color:#fff; border-color:#4b5563; }

/* ===== 읽기 실패 안내 카드 ===== */
.load-status{
  background:#fff7ed; color:#92400e; border:1px solid #fed7aa; border-radius:8px;
  padding:10px 12px; margin:8px 0 12px;
}

